import{c as N,j as e,R as S,r as x,g as k,a as B,d as T}from"./index-B2tQL_YW.js";import{E as W}from"./EventCard-DDR6djr1.js";import{S as C}from"./SubscriptionBanner-B0D0YzdY.js";import{P as F}from"./PageLayout-CrVlmotn.js";import{F as D,B as I,H as M}from"./Button-Cm5R9cfv.js";import{C as H}from"./Card-CrQxk0ik.js";import{I as w}from"./Input-B1JXnULr.js";import"./Tag-DgcKkCgC.js";import"./LocationOn-D_jY62KQ.js";import"./Container-Brmxb82b.js";const O=N(e.jsx("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"})),R=({label:i,id:h,options:g,error:o,className:f,containerClassName:v,disabled:m,...a})=>{const n=S.useId(),t=h||n,c="w-full appearance-none rounded-lg border bg-bg-secondary p-3 text-base text-text-primary transition-colors duration-200 focus:outline-none",s={default:"border-border-primary focus:ring-2 focus:ring-primary-base/50 focus:border-primary-base",error:"border-status-error text-status-error focus:ring-2 focus:ring-status-error/50 focus:border-status-error",disabled:"disabled:opacity-60 disabled:cursor-not-allowed disabled:bg-gray-100"},r=[c,o?s.error:s.default,m&&s.disabled,f].filter(Boolean).join(" "),E=["w-full",v].filter(Boolean).join(" ");return e.jsxs("div",{className:E,children:[i&&e.jsx("label",{htmlFor:t,className:"block text-sm font-semibold mb-2 text-text-primary",children:i}),e.jsxs("div",{className:"relative w-full",children:[e.jsx("select",{id:t,className:r,disabled:m,"aria-invalid":!!o,"aria-describedby":o?`${t}-error`:void 0,...a,children:g.map(l=>e.jsx("option",{value:l.value,children:l.label},l.value))}),e.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-3",children:e.jsx(O,{className:"h-5 w-5 text-text-muted"})})]}),o&&e.jsx("p",{id:`${t}-error`,className:"mt-2 text-sm text-status-error",children:o})]})},K=()=>{const[i,h]=x.useState([]),[g,o]=x.useState([]);x.useEffect(()=>{(async()=>{const c=(await k(B(T,"events"))).docs.map(s=>({...s.data(),id:s.id})).sort((s,r)=>new Date(s.date).getTime()-new Date(r.date).getTime());h(c)})()},[]),x.useEffect(()=>{if(i.length>0){const a=f(i);o(a)}},[i]);const f=a=>{const n=new Date,t=new Date(n.getFullYear(),n.getMonth(),n.getDate()),c=new Date(t);c.setDate(c.getDate()+1);const s=new Date(t);s.setDate(t.getDate()-t.getDay());const r=new Date(s);r.setDate(s.getDate()+6),new Date(r).setDate(r.getDate()+1);const l=[],b=[],y=[];a.forEach(d=>{const j=new Date(d.date),p=new Date(j.getFullYear(),j.getMonth(),j.getDate());p.getTime()===t.getTime()?l.push(d):p>=s&&p<=r?b.push(d):p>r&&y.push(d)});const u=[];if(l.length>0){const d=`Today - ${v(t)}`;u.push({title:d,events:l})}return b.length>0&&u.push({title:"This Week",events:b}),y.length>0&&u.push({title:"Next Week & Beyond",events:y}),u},v=a=>{const n={weekday:"long",month:"long",day:"numeric"};return a.toLocaleDateString("en-US",n)},m=[{label:"Event Type",value:""},{label:"Worship Service",value:"worship"},{label:"Bible Study",value:"study"}];return e.jsxs(F,{pageId:"events",children:[e.jsxs(D,{direction:"col",className:"p-8 space-y-8",children:[e.jsx(H,{children:e.jsxs(D,{direction:"col",gap:8,items:"center",className:"md:flex-row",children:[e.jsx(R,{label:"Filter by Category",options:m}),e.jsxs(D,{direction:"col",className:"md:flex-row ",items:"center",gap:4,children:[e.jsx(w,{type:"date",label:"Start Date","aria-label":"Start Date"}),e.jsx(w,{type:"date",label:"End Date","aria-label":"End Date"})]}),e.jsx(w,{label:"Search Events",type:"text",placeholder:"Search events"}),e.jsx(I,{className:"min-w-fit max-h-fit",children:"Apply Filters"})]})}),e.jsx("div",{className:"space-y-8",children:g.map((a,n)=>e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-5 h-5 bg-blue-500 rounded-sm flex items-center justify-center",children:e.jsx("div",{className:"w-2 h-2 bg-white rounded-sm"})}),e.jsx(M,{as:"h3",variant:"section-subheader",className:"text-gray-700 font-semibold",children:a.title})]}),e.jsx("div",{className:"space-y-4 ml-1 lg:ml-7",children:a.events.map(t=>e.jsx(W,{event:t},t.id))})]},n))})]}),e.jsx(C,{})]})};export{K as default};

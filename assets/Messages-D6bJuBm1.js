import{c as z,j as e,r as c}from"./index-B2tQL_YW.js";import{F as i,H as k,B as $}from"./Button-Cm5R9cfv.js";import{T as d,P as F}from"./PageLayout-CrVlmotn.js";import{C as D}from"./Card-CrQxk0ik.js";import{I as H}from"./IconContainer-pwX9fPfy.js";import{G as Y}from"./Grid-D6yF3tta.js";import{T as G,a as X,b as B,c as K,d as U}from"./Tabs-BgFWbtm7.js";const J=z(e.jsx("path",{d:"M8 5v14l11-7z"})),O=o=>e.jsx("svg",{...o,xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"currentColor",children:e.jsx("path",{d:"M6 6h2v12H6zm3.5 6l8.5 6V6z"})}),W=o=>e.jsx("svg",{...o,xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"currentColor",children:e.jsx("path",{d:"M6 18l8.5-6L6 6v12zM16 6v12h2V6h-2z"})}),Z=o=>e.jsx("svg",{...o,xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"currentColor",children:e.jsx("path",{d:"M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"})}),q=({duration:o,currentTime:m,onProgressChange:x,progressBarRef:l,onSkipBackward:u,onSkipForward:j,audioSrc:h})=>{const v=t=>{if(isNaN(t)||t===1/0)return"0:00";const r=Math.floor(t/60),p=Math.floor(t%60);return`${r}:${p<10?"0":""}${p}`},f=["w-full h-2 rounded-lg cursor-pointer appearance-none","bg-[linear-gradient(to_right,var(--color-primary-dark)_var(--progress,0%),var(--color-off-white)_var(--progress,0%))]","[&::-webkit-slider-thumb]:appearance-none","[&::-webkit-slider-thumb]:h-4","[&::-webkit-slider-thumb]:w-4","[&::-webkit-slider-thumb]:bg-primary-dark","[&::-webkit-slider-thumb]:rounded-full","[&::-webkit-slider-thumb]:-mt-1"].join(" ");return e.jsxs("div",{className:"w-full mt-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("input",{ref:l,type:"range",value:m,max:o||0,onChange:x,className:f,"aria-label":"Audio progress bar"}),e.jsxs(i,{justify:"between",children:[e.jsx(d,{variant:"body",className:"text-text-muted text-sm",children:v(m)}),e.jsx(d,{variant:"body",className:"text-text-muted text-sm",children:v(o)})]})]}),e.jsxs(i,{justify:"center",items:"center",gap:4,className:"mt-2",children:[e.jsx("button",{onClick:u,className:"text-text-muted hover:text-text-primary","aria-label":"Skip backward 10 seconds",children:e.jsx(O,{})}),e.jsx("a",{href:h,download:!0,className:"text-text-muted hover:text-text-primary","aria-label":"Download audio",children:e.jsx(Z,{})}),e.jsx("button",{onClick:j,className:"text-text-muted hover:text-text-primary","aria-label":"Skip forward 10 seconds",children:e.jsx(W,{})})]})]})},Q=({audioSrc:o,onAudioRef:m,onPlayStateChange:x,isPlaying:l})=>{const[u,j]=c.useState(!1),[h,v]=c.useState(0),[f,t]=c.useState(0);console.log(u);const r=c.useRef(null),p=c.useRef(null);c.useEffect(()=>{const a=r.current;if(!a)return;const w=()=>{v(a.duration),t(a.currentTime)},E=()=>t(a.currentTime),I=()=>{j(!1),x==null||x(!1)};return a.addEventListener("loadedmetadata",w),a.addEventListener("timeupdate",E),a.addEventListener("ended",I),a.readyState>0&&w(),()=>{a.removeEventListener("loadedmetadata",w),a.removeEventListener("timeupdate",E),a.removeEventListener("ended",I)}},[x]),c.useEffect(()=>{m&&r.current&&m(r.current)},[m]),c.useEffect(()=>{typeof l=="boolean"&&j(l)},[l]),c.useEffect(()=>{if(p.current){const a=h>0?f/h*100:0;p.current.style.setProperty("--progress",`${a}%`)}},[f,h]);const A=a=>{const w=Number(a.target.value);r.current&&(r.current.currentTime=w,t(w))},T=a=>{r.current&&(r.current.currentTime+=a)};return e.jsxs(e.Fragment,{children:[e.jsx("audio",{ref:r,src:o,preload:"metadata"}),e.jsx(q,{duration:h,currentTime:f,onProgressChange:A,progressBarRef:p,onSkipBackward:()=>T(-10),onSkipForward:()=>T(10),audioSrc:o})]})},ee=()=>{const[o,m]=c.useState(null),[x,l]=c.useState(!1),u=c.useRef(null),j=[{id:"1",title:"Walking in Faith: Trusting God's Plan",author:"Pastor Danny",date:"December 1, 2024",audioSrc:"/sermon_audio_2-2-2025.m4a",duration:"45:23"},{id:"2",title:"The Power of Prayer",author:"Pastor Sarah",date:"November 24, 2024",audioSrc:"/path/to/audio2.mp3",duration:"38:15"},{id:"3",title:"Grace and Mercy",author:"Pastor John",date:"November 17, 2024",audioSrc:"/path/to/audio3.mp3",duration:"42:30"}],h=t=>{var r,p;o===t?x?((r=u.current)==null||r.pause(),l(!1)):((p=u.current)==null||p.play(),l(!0)):(u.current&&(u.current.pause(),u.current.currentTime=0),m(t),l(!1))},v=t=>{u.current=t},f=t=>{l(t)};return e.jsx(i,{direction:"col",items:"center",children:e.jsxs(i,{direction:"col",items:"center",className:"lg:max-w-6xl mx-auto space-y-8 py-8",children:[e.jsx(k,{variant:"section",children:"Latest Messages"}),e.jsx(i,{direction:"col",className:"px-4 md:px-12 lg:px-32 w-full space-y-4",children:j.map(t=>e.jsxs(D,{children:[e.jsx("div",{onClick:()=>h(t.id),className:"cursor-pointer",children:e.jsxs(i,{direction:"row",justify:"between",children:[e.jsxs(i,{direction:"row",gap:4,children:[e.jsx(H,{variant:"primary-dark",children:e.jsx(J,{className:"text-bg-primary"})}),e.jsxs(i,{direction:"col",children:[e.jsx(k,{variant:"section-subheader",children:t.title}),e.jsxs(d,{variant:"body",className:"text-text-muted",children:[t.author," â€¢ ",t.date]})]})]}),e.jsx(d,{variant:"body",className:"text-text-muted",children:t.duration})]})}),o===t.id&&e.jsx(Q,{audioSrc:t.audioSrc,title:t.title,author:t.author,date:t.date,onAudioRef:v,onPlayStateChange:f,isPlaying:x})]},t.id))}),e.jsx($,{children:"Load More Audio"})]})})},P="AIzaSyB8StElXpSpOrWon9KsAnbUuAFdZGfda94",C="UChUCr2xPXjXnjm7bzJsXIGA",te=()=>{var A,T,a,w,E,I,L,M,_;const[o,m]=c.useState([]),[x,l]=c.useState(!0),[u,j]=c.useState(null);c.useEffect(()=>{(async()=>{try{l(!0),j(null);const s=await fetch(`https://www.googleapis.com/youtube/v3/search?key=${P}&channelId=${C}&part=snippet&order=date&maxResults=12&type=video`);if(!s.ok)throw new Error(`YouTube API error (${s.status})`);const g=await s.json();if(g.error)throw new Error(g.error.message||"YouTube API error");const y=g.items.filter(N=>N.id&&N.id.videoId).map(N=>N.id.videoId).join(",");if(!y){m([]);return}const b=await fetch(`https://www.googleapis.com/youtube/v3/videos?key=${P}&id=${y}&part=snippet,statistics,contentDetails`);if(!b.ok)throw new Error(`YouTube API error (${b.status})`);const S=await b.json();if(S.error)throw new Error(S.error.message||"YouTube API error");m(S.items||[])}catch(s){console.error("Error fetching YouTube videos:",s),j(s instanceof Error?s.message:"Failed to load videos")}finally{l(!1)}})()},[]);const h=n=>{const s=n.match(/PT(\d+H)?(\d+M)?(\d+S)?/);if(!s)return"0:00";const g=s[1]?parseInt(s[1]):0,y=s[2]?parseInt(s[2]):0,b=s[3]?parseInt(s[3]):0;return g>0?`${g}:${y.toString().padStart(2,"0")}:${b.toString().padStart(2,"0")}`:`${y}:${b.toString().padStart(2,"0")}`},v=n=>{const s=parseInt(n);return s>=1e6?`${(s/1e6).toFixed(1)}M`:s>=1e3?`${(s/1e3).toFixed(1)}K`:s.toString()},f=n=>new Date(n).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),t=(n,s=150)=>n.length<=s?n:n.substring(0,s)+"...";if(x)return e.jsx(i,{direction:"col",items:"center",justify:"center",className:"min-h-[400px]",children:e.jsx(d,{variant:"body",className:"text-text-muted",children:"Loading sermons..."})});if(u)return e.jsxs(i,{direction:"col",items:"center",justify:"center",className:"min-h-[400px]",children:[e.jsx(d,{variant:"body",className:"text-red-600 mb-4",children:u}),e.jsx($,{onClick:()=>window.location.reload(),children:"Try Again"})]});if(o.length===0)return e.jsx(i,{direction:"col",items:"center",justify:"center",className:"min-h-[400px]",children:e.jsx(d,{variant:"body",className:"text-text-muted",children:"No sermons found."})});const r=o[0],p=o.slice(1,7);return e.jsxs(i,{direction:"col",items:"center",children:[e.jsxs(i,{direction:"col",items:"center",className:"lg:max-w-6xl mx-auto space-y-8 py-8",children:[e.jsx(k,{variant:"section",children:"Latest Message"}),e.jsx(i,{direction:"col",className:"px-4 md:px-12 lg:px-32",children:e.jsxs(D,{className:"px-0 py-0",children:[e.jsx("a",{href:`https://www.youtube.com/watch?v=${r.id}`,target:"_blank",rel:"noopener noreferrer",className:"block",children:e.jsx("img",{src:((a=(T=(A=r.snippet)==null?void 0:A.thumbnails)==null?void 0:T.high)==null?void 0:a.url)||"/video_sermons.png",alt:((w=r.snippet)==null?void 0:w.title)||"Latest sermon",className:"mb-0 w-full h-auto object-cover"})}),e.jsxs(i,{direction:"col",className:"space-y-4 p-4",children:[e.jsx(k,{variant:"section",children:((E=r.snippet)==null?void 0:E.title)||"Untitled Sermon"}),e.jsx(d,{variant:"body",className:"text-text-muted",children:t(((I=r.snippet)==null?void 0:I.description)||"No description available.")}),e.jsxs(i,{direction:"row",justify:"between",className:"py-2",children:[e.jsx(d,{variant:"body",className:"text-text-muted",children:(L=r.snippet)!=null&&L.publishedAt?f(r.snippet.publishedAt):"Unknown date"}),e.jsx(d,{variant:"body",className:"text-text-muted",children:(M=r.contentDetails)!=null&&M.duration?h(r.contentDetails.duration):"0 minutes"}),e.jsxs(d,{variant:"body",className:"text-text-muted",children:[(_=r.statistics)!=null&&_.viewCount?v(r.statistics.viewCount):"0"," views"]})]})]})]})})]}),e.jsx(k,{variant:"section",children:"Recent Messages"}),e.jsxs(i,{direction:"col",items:"center",className:"px-4 md:px-12 lg:px-32 space-y-8 py-8",children:[e.jsx(Y,{gap:8,className:"grid-cols-1 md:grid-cols-2 lg:grid-cols-3 lg:grid-rows-2",children:p.map(n=>{var s,g,y,b,S,N,V,R;return e.jsxs(D,{className:"px-0 py-0",children:[e.jsx("a",{href:`https://www.youtube.com/watch?v=${n.id}`,target:"_blank",rel:"noopener noreferrer",className:"block",children:e.jsx("img",{src:((y=(g=(s=n.snippet)==null?void 0:s.thumbnails)==null?void 0:g.high)==null?void 0:y.url)||"/video_sermons.png",alt:((b=n.snippet)==null?void 0:b.title)||"Sermon thumbnail",className:"mb-0 w-full h-auto object-cover"})}),e.jsxs(i,{direction:"col",className:"space-y-4 p-4",children:[e.jsx(k,{variant:"section",children:((S=n.snippet)==null?void 0:S.title)||"Untitled Sermon"}),e.jsx(d,{variant:"body",className:"text-text-muted",children:t(((N=n.snippet)==null?void 0:N.description)||"No description available.",100)}),e.jsxs(i,{direction:"row",justify:"between",className:"py-2",children:[e.jsx(d,{variant:"body",className:"text-text-muted",children:(V=n.snippet)!=null&&V.publishedAt?f(n.snippet.publishedAt):"Unknown date"}),e.jsx(d,{variant:"body",className:"text-text-muted",children:(R=n.contentDetails)!=null&&R.duration?h(n.contentDetails.duration):"0 min"})]})]})]},n.id)})}),e.jsx($,{className:"w-fit",onClick:()=>window.open(`https://www.youtube.com/channel/${C}/videos`,"_blank"),children:"Load More Videos"})]})]})},de=()=>e.jsx(F,{pageId:"messages",children:e.jsxs(G,{children:[e.jsxs(X,{children:[e.jsx(B,{index:0,children:"Video Sermons"}),e.jsx(B,{index:1,children:"Audio Sermons"})]}),e.jsxs(K,{children:[e.jsx(U,{index:0,children:e.jsx(te,{})}),e.jsx(U,{index:1,children:e.jsx(ee,{})})]})]})});export{de as default};

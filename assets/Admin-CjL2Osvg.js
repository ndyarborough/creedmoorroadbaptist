import{R as H,j as e,r as h,y as W,a as G,d as S,z,p as R,q as B,A as q,o as U,B as _,C as M,n as O,g as J,t as K,D as Q,w as V}from"./index-B2tQL_YW.js";import{H as f,F as u,B as C}from"./Button-Cm5R9cfv.js";import{C as X}from"./Container-Brmxb82b.js";import{T as Z,a as ee,b as F,c as te,d as P}from"./Tabs-BgFWbtm7.js";import{I as v}from"./Input-B1JXnULr.js";import{C as Y}from"./Checkbox-DqRV6mKK.js";import{C as $}from"./Card-CrQxk0ik.js";import{E as se,S as ae}from"./EventCard-DDR6djr1.js";import{T as A}from"./Tag-DgcKkCgC.js";import{L as re}from"./LocationOn-D_jY62KQ.js";const I=({label:s,id:d,error:i,className:m,containerClassName:x,disabled:g,rows:l=4,...b})=>{const w=H.useId(),c=d||w,t="w-full rounded-lg border bg-bg-secondary p-3 text-base text-text-primary transition-colors duration-200 focus:outline-none resize-vertical",a={default:"border-border-primary focus:ring-2 focus:ring-primary-base/50 focus:border-primary-base",error:"border-status-error text-status-error focus:ring-2 focus:ring-status-error/50 focus:border-status-error",disabled:"disabled:opacity-60 disabled:cursor-not-allowed disabled:bg-gray-100"},r=[t,i?a.error:a.default,g&&a.disabled,m].filter(Boolean).join(" "),n=["w-full flex justify-center flex-col",x].filter(Boolean).join(" ");return e.jsxs("div",{className:n,children:[e.jsx("label",{htmlFor:c,className:"block text-sm font-semibold mb-2 text-text-primary",children:s}),e.jsx("textarea",{id:c,className:r,disabled:g,rows:l,"aria-invalid":!!i,"aria-describedby":i?`${c}-error`:void 0,...b}),i&&e.jsx("p",{id:`${c}-error`,className:"mt-2 text-sm text-status-error",children:i})]})},ne=()=>{const[s,d]=h.useState({title:"",description:"",date:"",startTime:"",endTime:"",location:"",category:"",recurring:!1,photoURLs:[]}),[i,m]=h.useState(null),[x,g]=h.useState(!1),l=t=>{const{name:a,value:r,type:n}=t.target;if(n==="checkbox"){const o=t.target.checked;d(p=>({...p,[a]:o}))}else d(o=>({...o,[a]:r}))},b=t=>{t.target.files&&m(t.target.files)},w=async(t,a)=>{const r=Array.from(t).map(async n=>{const o=R(B,`events/${a}/${n.name}`),p=await q(o,n);return U(p.ref)});return Promise.all(r)},c=async t=>{t.preventDefault(),g(!0);try{const a=await W(G(S,"events"),{...s,photoURLs:[]}),r=a.id;let n=[];i&&i.length>0&&(n=await w(i,r)),await z(a,{photoURLs:n}),d({title:"",description:"",date:"",startTime:"",endTime:"",location:"",category:"",recurring:!1,photoURLs:[]}),m(null),alert("Event added successfully!")}catch(a){console.error("Error adding event:",a),alert("Failed to add event. Please try again.")}finally{g(!1)}};return e.jsxs($,{className:"p-6",children:[e.jsx(f,{as:"h3",variant:"section-subheader",className:"mb-4",children:"Add New Event"}),e.jsx("form",{onSubmit:c,children:e.jsxs(u,{direction:"col",gap:4,children:[e.jsx(v,{type:"text",name:"title",label:"Event Title",value:s.title,onChange:l,required:!0,placeholder:"Enter event title"}),e.jsx(I,{name:"description",label:"Description",value:s.description,onChange:l,required:!0,placeholder:"Enter event description",rows:4}),e.jsxs(u,{direction:"row",gap:4,children:[e.jsx(v,{type:"date",name:"date",label:"Date",value:s.date,onChange:l,required:!0}),e.jsx(v,{type:"time",name:"startTime",label:"Start Time",value:s.startTime,onChange:l,required:!0}),e.jsx(v,{type:"time",name:"endTime",label:"End Time",value:s.endTime,onChange:l,required:!0})]}),e.jsxs(u,{direction:"row",gap:4,children:[e.jsx(v,{type:"text",name:"location",label:"Location",value:s.location,onChange:l,required:!0,placeholder:"Enter location"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),e.jsxs("select",{name:"category",value:s.category,onChange:l,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Select category"}),e.jsx("option",{value:"Worship Service",children:"Worship Service"}),e.jsx("option",{value:"Bible Study",children:"Bible Study"}),e.jsx("option",{value:"Prayer Meeting",children:"Prayer Meeting"}),e.jsx("option",{value:"Fellowship",children:"Fellowship"}),e.jsx("option",{value:"Ministry",children:"Ministry"}),e.jsx("option",{value:"Youth",children:"Youth"}),e.jsx("option",{value:"Children",children:"Children"}),e.jsx("option",{value:"Outreach",children:"Outreach"}),e.jsx("option",{value:"Special Event",children:"Special Event"}),e.jsx("option",{value:"Conference",children:"Conference"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Photos (Optional)"}),e.jsx("input",{type:"file",multiple:!0,accept:"image/*",onChange:b,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"You can select multiple photos for this event"})]}),e.jsxs(u,{direction:"row",items:"center",gap:2,children:[e.jsx(Y,{label:"Recurring",name:"recurring",checked:s.recurring,onChange:l}),e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"This is a recurring event"})]}),e.jsx(C,{type:"submit",disabled:x,className:"w-full",children:x?"Adding Event...":"Add Event"})]})})]})},oe=()=>{const[s,d]=h.useState({title:"",description:"",date:"",startTime:"",endTime:"",location:"",category:"",recurring:!1,photoURLs:[]}),[i,m]=h.useState(null),[x,g]=h.useState(!1),l=t=>{const{name:a,value:r,type:n}=t.target;if(n==="checkbox"){const o=t.target.checked;d(p=>({...p,[a]:o}))}else d(o=>({...o,[a]:r}))},b=t=>{t.target.files&&m(t.target.files)},w=async t=>{const a=Array.from(t).map(async r=>{const n=R(B,`groups/${Date.now()}_${r.name}`),o=await q(n,r);return U(o.ref)});return Promise.all(a)},c=async t=>{t.preventDefault(),g(!0);try{let a=[];i&&i.length>0&&(a=await w(i));const r={...s,photoURLs:a};await W(G(S,"groups"),r),d({title:"",description:"",date:"",startTime:"",endTime:"",location:"",category:"",recurring:!1,photoURLs:[]}),m(null),alert("Group added successfully!")}catch(a){console.error("Error adding group:",a),alert("Failed to add group. Please try again.")}finally{g(!1)}};return e.jsxs($,{className:"p-6",children:[e.jsx(f,{as:"h3",variant:"section-subheader",className:"mb-4",children:"Add New Group"}),e.jsx("form",{onSubmit:c,children:e.jsxs(u,{direction:"col",gap:4,children:[e.jsx(v,{type:"text",name:"title",label:"Group Title",value:s.title,onChange:l,required:!0,placeholder:"Enter group title"}),e.jsx(I,{name:"description",label:"Description",value:s.description,onChange:l,required:!0,placeholder:"Enter group description",rows:4}),e.jsxs(u,{direction:"row",gap:4,children:[e.jsx(v,{type:"date",name:"date",label:"Date",value:s.date,onChange:l,required:!0}),e.jsx(v,{type:"time",name:"startTime",label:"Start Time",value:s.startTime,onChange:l,required:!0}),e.jsx(v,{type:"time",name:"endTime",label:"End Time",value:s.endTime,onChange:l,required:!0})]}),e.jsxs(u,{direction:"row",gap:4,children:[e.jsx(v,{type:"text",name:"location",label:"Location",value:s.location,onChange:l,required:!0,placeholder:"Enter location"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),e.jsxs("select",{name:"category",value:s.category,onChange:l,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Select category"}),e.jsx("option",{value:"Bible Study",children:"Bible Study"}),e.jsx("option",{value:"Prayer Group",children:"Prayer Group"}),e.jsx("option",{value:"Fellowship",children:"Fellowship"}),e.jsx("option",{value:"Ministry",children:"Ministry"}),e.jsx("option",{value:"Youth",children:"Youth"}),e.jsx("option",{value:"Children",children:"Children"}),e.jsx("option",{value:"Women",children:"Women"}),e.jsx("option",{value:"Men",children:"Men"}),e.jsx("option",{value:"Seniors",children:"Seniors"}),e.jsx("option",{value:"Small Group",children:"Small Group"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Photos (Optional)"}),e.jsx("input",{type:"file",multiple:!0,accept:"image/*",onChange:b,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"You can select multiple photos for this group"})]}),e.jsxs(u,{direction:"row",items:"center",gap:2,children:[e.jsx(Y,{label:"Recurring",name:"recurring",checked:s.recurring,onChange:l}),e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"This is a recurring group"})]}),e.jsx(C,{type:"submit",disabled:x,className:"w-full",children:x?"Adding Group...":"Add Group"})]})})]})},ie=()=>{const[s,d]=h.useState([]),[i,m]=h.useState([]),[x,g]=h.useState(!0);h.useEffect(()=>{const c=_(G(S,"events"),t=>{const r=t.docs.map(n=>({id:n.id,...n.data()})).sort((n,o)=>new Date(n.date).getTime()-new Date(o.date).getTime());d(r),g(!1)});return()=>c()},[]),h.useEffect(()=>{if(s.length>0){const c=l(s);m(c)}else m([])},[s]);const l=c=>{const t=new Date,a=new Date(t.getFullYear(),t.getMonth(),t.getDate()),r=new Date(a);r.setDate(r.getDate()+1);const n=new Date(a);n.setDate(a.getDate()-a.getDay());const o=new Date(n);o.setDate(n.getDate()+6),new Date(o).setDate(o.getDate()+1);const k=[],T=[],E=[];c.forEach(j=>{const y=new Date(j.date),N=new Date(y.getFullYear(),y.getMonth(),y.getDate());N.getTime()===a.getTime()?k.push(j):N>=n&&N<=o?T.push(j):N>o&&E.push(j)});const D=[];if(k.length>0){const j=`Today - ${b(a)}`;D.push({title:j,events:k})}return T.length>0&&D.push({title:"This Week",events:T}),E.length>0&&D.push({title:"Next Week & Beyond",events:E}),D},b=c=>{const t={weekday:"long",month:"long",day:"numeric"};return c.toLocaleDateString("en-US",t)},w=async c=>{if(window.confirm("Are you sure you want to delete this event?"))try{await M(O(S,"events",c))}catch(t){console.error("Error deleting event:",t),alert("Failed to delete event. Please try again.")}};return x?e.jsxs("div",{className:"mt-8",children:[e.jsx(f,{as:"h2",variant:"section",children:"Existing Events"}),e.jsx("div",{className:"flex justify-center items-center py-8",children:e.jsx("p",{className:"text-gray-500",children:"Loading events..."})})]}):e.jsxs("div",{className:"mt-8",children:[e.jsx(f,{as:"h2",variant:"section",children:"Existing Events"}),s.length===0?e.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg text-center",children:[e.jsx("p",{className:"text-gray-500 mb-4",children:"No events found."}),e.jsx("p",{className:"text-sm text-gray-400",children:"Add your first event using the form above."})]}):e.jsx("div",{className:"space-y-8",children:i.map((c,t)=>e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-5 h-5 bg-blue-500 rounded-sm flex items-center justify-center",children:e.jsx("div",{className:"w-2 h-2 bg-white rounded-sm"})}),e.jsx(f,{as:"h3",variant:"section-subheader",className:"text-gray-700 font-semibold",children:c.title})]}),e.jsx("div",{className:"space-y-4 ml-1 lg:ml-7",children:c.events.map(a=>e.jsxs("div",{className:"relative",children:[e.jsx(se,{event:a}),e.jsx(C,{onClick:()=>w(a.id),variant:"danger",className:"absolute top-2 right-2 text-xs px-2 py-1",children:"Delete"})]},a.id))})]},t))})]})},le=({group:s})=>{const d=i=>new Date(i).toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"});return e.jsx("div",{className:"bg-white shadow-md rounded-lg p-4 border-l-4 border-green-500",children:e.jsxs(u,{direction:"row",justify:"center",items:"center",gap:4,children:[s.photoURLs&&s.photoURLs.length>0&&e.jsx("div",{className:"mt-4",children:e.jsx(u,{direction:"row",gap:4,children:s.photoURLs.map(i=>e.jsx("img",{src:i,alt:s.title,className:"object-cover rounded-lg"},i))})}),e.jsxs(u,{direction:"col",gap:2,children:[e.jsx("span",{className:"text-sm text-gray-500 font-medium",children:d(s.date)}),e.jsxs(u,{direction:"row",justify:"between",items:"center",children:[e.jsx(f,{as:"h3",variant:"section-subheader",children:s.title}),e.jsxs(u,{direction:"row",gap:2,items:"center",children:[e.jsx(A,{className:"bg-green-100 text-green-800",children:s.category}),s.recurring&&e.jsx(A,{className:"bg-blue-100 text-blue-800",children:"Recurring"})]})]}),e.jsx("p",{className:"text-gray-600",children:s.description}),e.jsxs(u,{direction:"row",items:"center",gap:4,className:"text-gray-500 mt-4",children:[e.jsxs(u,{direction:"row",items:"center",gap:2,children:[e.jsx(ae,{}),e.jsxs("span",{children:[s.startTime," - ",s.endTime]})]}),e.jsxs(u,{direction:"row",items:"center",gap:2,children:[e.jsx(re,{}),e.jsx("span",{children:s.location})]})]})]})]})})},ce=()=>{const[s,d]=h.useState([]),[i,m]=h.useState([]),[x,g]=h.useState(!0);h.useEffect(()=>{l()},[]),h.useEffect(()=>{if(s.length>0){const t=b(s);m(t)}else m([])},[s]);const l=async()=>{try{const r=(await J(G(S,"groups"))).docs.map(n=>({...n.data(),id:n.id})).sort((n,o)=>new Date(n.date).getTime()-new Date(o.date).getTime());d(r)}catch(t){console.error("Error fetching groups:",t)}finally{g(!1)}},b=t=>{const a=new Date,r=new Date(a.getFullYear(),a.getMonth(),a.getDate()),n=new Date(r);n.setDate(n.getDate()+1);const o=new Date(r);o.setDate(r.getDate()-r.getDay());const p=new Date(o);p.setDate(o.getDate()+6),new Date(p).setDate(p.getDate()+1);const T=[],E=[],D=[];t.forEach(y=>{const N=new Date(y.date),L=new Date(N.getFullYear(),N.getMonth(),N.getDate());L.getTime()===r.getTime()?T.push(y):L>=o&&L<=p?E.push(y):L>p&&D.push(y)});const j=[];if(T.length>0){const y=`Today - ${w(r)}`;j.push({title:y,groups:T})}return E.length>0&&j.push({title:"This Week",groups:E}),D.length>0&&j.push({title:"Next Week & Beyond",groups:D}),j},w=t=>{const a={weekday:"long",month:"long",day:"numeric"};return t.toLocaleDateString("en-US",a)},c=async t=>{if(window.confirm("Are you sure you want to delete this group?"))try{await M(O(S,"groups",t)),l()}catch(a){console.error("Error deleting group:",a),alert("Failed to delete group. Please try again.")}};return x?e.jsx("div",{className:"flex justify-center items-center py-8",children:e.jsx("p",{className:"text-gray-500",children:"Loading groups..."})}):s.length===0?e.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg text-center",children:[e.jsx("p",{className:"text-gray-500 mb-4",children:"No groups found."}),e.jsx("p",{className:"text-sm text-gray-400",children:"Add your first group using the form above."})]}):e.jsx("div",{className:"space-y-8",children:i.map((t,a)=>e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-5 h-5 bg-green-500 rounded-sm flex items-center justify-center",children:e.jsx("div",{className:"w-2 h-2 bg-white rounded-sm"})}),e.jsx(f,{as:"h3",variant:"section-subheader",className:"text-gray-700 font-semibold",children:t.title})]}),e.jsx("div",{className:"space-y-4 ml-1 lg:ml-7",children:t.groups.map(r=>e.jsxs("div",{className:"relative",children:[e.jsx(le,{group:r}),e.jsx(C,{onClick:()=>c(r.id),variant:"danger",className:"absolute top-2 right-2 text-xs px-2 py-1",children:"Delete"})]},r.id))})]},a))})},ve=()=>{const s=K(),d=async()=>{try{await Q(V),s("/login")}catch(i){console.error("Failed to log out",i)}};return e.jsxs(X,{className:"py-8",children:[e.jsx(f,{as:"h1",variant:"page",children:"Admin Dashboard"}),e.jsx("p",{children:"Welcome to the admin dashboard."}),e.jsx(u,{direction:"col",className:"max-w-[70%] mx-auto mt-8",children:e.jsxs(Z,{children:[e.jsxs(ee,{children:[e.jsx(F,{index:0,children:"Events"}),e.jsx(F,{index:1,children:"Groups"})]}),e.jsxs(te,{className:"max-w-[80%] mx-auto",children:[e.jsxs(P,{index:0,children:[e.jsxs("div",{className:"mt-8",children:[e.jsx(f,{as:"h2",variant:"section",children:"Add New Event"}),e.jsx(ne,{})]}),e.jsx(ie,{})]}),e.jsxs(P,{index:1,children:[e.jsxs("div",{className:"mt-8",children:[e.jsx(f,{as:"h2",variant:"section",children:"Add New Group"}),e.jsx(oe,{})]}),e.jsxs("div",{className:"mt-8",children:[e.jsx(f,{as:"h2",variant:"section",children:"Existing Groups"}),e.jsx(ce,{})]})]})]})]})}),e.jsx(C,{onClick:d,className:"mt-8",children:"Logout"})]})};export{ve as default};
